import{a as W}from"./chunk-QD63WATL.js";import{a as L}from"./chunk-XIG2GNQT.js";import{a as B}from"./chunk-FPDEIVS4.js";import{a as N}from"./chunk-24BK7SGG.js";import{a as V}from"./chunk-VF3OXE4T.js";import{e as j}from"./chunk-X4RZMD3A.js";import{$ as E,$a as I,Fa as b,I as s,J as d,M as w,N as O,Q as g,S as _,Ta as D,U as y,Ua as P,W as t,X as i,Xa as k,Y as l,aa as m,ab as T,ba as f,bb as U,ka as u,ma as h,na as v,oa as C,pa as x,t as F,y as M,yb as R,z as S}from"./chunk-OAS2J22F.js";function G(n,p){if(n&1&&(t(0,"div",28),u(1),i()),n&2){let r=p.$implicit,o=f();s(),h(" ",o.recipeingredientService.doc(r).name," ")}}function H(n,p){if(n&1){let r=E();t(0,"div",29),m("click",function(){let e=M(r).$implicit,c=f();return S(c.recipe.ingredients.push(e._id))}),u(1),i()}if(n&2){let r=p.$implicit;s(),h(" ",r.name," ")}}function J(n,p){if(n&1&&(t(0,"div",28),u(1),i()),n&2){let r=p.$implicit,o=f();s(),h(" ",o.recipephaseService.doc(r).name," ")}}function K(n,p){if(n&1){let r=E();t(0,"div",29),m("click",function(){let e=M(r).$implicit,c=f();return S(c.recipe.phases.push(e._id))}),u(1),i()}if(n&2){let r=p.$implicit;s(),h(" ",r.name," ")}}var z=(()=>{class n{constructor(r,o,e,c,a,A){this._recipeService=r,this._form=o,this._router=e,this.recipephaseService=c,this.recipeingredientService=a,this._recipelinkService=A,this.isMenuOpen=!1,this.recipe=this._recipeService.new(),this.recipe.phases=[],this.recipe.ingredients=[],this.recipe.imageUrl="",this.form=this._form.getForm("recipe",L)}onFileSelected(r){let o=r.target;if(o.files&&o.files.length>0){let e=o.files[0],c=new FileReader;c.onload=a=>{this.recipe.imageUrl=a.target.result},c.readAsDataURL(e)}}create(){if(!this.recipe.name||!this.recipe.description||!this.recipe.imageUrl){alert("\u0417\u0430\u043F\u043E\u0432\u043D\u0456\u0442\u044C \u0443\u0441\u0456 \u043F\u043E\u043B\u044F!");return}this._recipeService.create(this.recipe).subscribe(r=>{this.recipe.ingredients.forEach(o=>{this._recipelinkService.create({id:Date.now(),_id:"some_unique_id_for_recipelink",recipe:r._id,ingredient:o,phase:r._id})}),this._router.navigate(["/recipes"])})}get phases(){return this.recipephaseService.recipephases}get ingredients(){return this.recipeingredientService.recipeingredients}static{this.\u0275fac=function(o){return new(o||n)(d(V),d(R),d(D),d(B),d(N),d(W))}}static{this.\u0275cmp=w({type:n,selectors:[["ng-component"]],standalone:!1,decls:48,vars:11,consts:[[1,"documents-wrapper"],[1,"documents-container"],[1,"documents-header"],[1,"documents-header-left"],["routerLink","/profile",1,"documents-header-left__avatar"],[1,"documents-header__title"],[1,"burger-wrap",3,"click"],[1,"burger"],[1,"recipe-form"],["for","title"],["id","title","type","text","placeholder","\u0412\u0432\u0435\u0434\u0456\u0442\u044C \u043D\u0430\u0437\u0432\u0443",3,"ngModelChange","ngModel"],["for","description"],["id","description","placeholder","\u041E\u043F\u0438\u0441 \u0440\u0435\u0446\u0435\u043F\u0442\u0443",3,"ngModelChange","ngModel"],["for","imageUrl"],["id","imageUrl","type","text","placeholder","\u0412\u0441\u0442\u0430\u0432\u0442\u0435 URL \u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u043D\u044F",3,"ngModelChange","ngModel"],[1,"file-upload"],["for","fileUpload",1,"file-label"],["id","fileUpload","type","file",3,"change"],[3,"click"],[1,"documents-main"],[1,"documents-main-content"],[1,"documents-main-row"],[1,"documents__title"],[1,"documents__description"],[1,"documents-tags"],[1,"documents-tags__wrap"],["class","documents-tags__item",4,"ngFor","ngForOf"],["class","documents-tags__item",3,"click",4,"ngFor","ngForOf"],[1,"documents-tags__item"],[1,"documents-tags__item",3,"click"]],template:function(o,e){o&1&&(t(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),l(4,"div",4),i(),l(5,"div",5),t(6,"div",6),m("click",function(){return e.isMenuOpen=!e.isMenuOpen}),l(7,"div",7),i()(),t(8,"div",8)(9,"h2"),u(10,"\u0414\u043E\u0434\u0430\u0442\u0438 \u043D\u043E\u0432\u0438\u0439 \u0440\u0435\u0446\u0435\u043F\u0442"),i(),t(11,"label",9),u(12,"\u041D\u0430\u0437\u0432\u0430 \u0440\u0435\u0446\u0435\u043F\u0442\u0443"),i(),t(13,"input",10),x("ngModelChange",function(a){return C(e.recipe.name,a)||(e.recipe.name=a),a}),i(),t(14,"label",11),u(15,"\u041E\u043F\u0438\u0441"),i(),t(16,"textarea",12),x("ngModelChange",function(a){return C(e.recipe.description,a)||(e.recipe.description=a),a}),i(),t(17,"label",13),u(18,"\u0417\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u043D\u044F (URL)"),i(),t(19,"input",14),x("ngModelChange",function(a){return C(e.recipe.imageUrl,a)||(e.recipe.imageUrl=a),a}),i(),t(20,"div",15)(21,"label",16),u(22,"\u0417\u0430\u0432\u0430\u043D\u0442\u0430\u0436\u0438\u0442\u0438 \u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u043D\u044F"),i(),t(23,"input",17),m("change",function(a){return e.onFileSelected(a)}),i()(),t(24,"button",18),m("click",function(){return e.create()}),u(25,"\u0414\u043E\u0434\u0430\u0442\u0438 \u0440\u0435\u0446\u0435\u043F\u0442"),i()(),t(26,"div",19)(27,"div",20)(28,"div",21)(29,"div",22),u(30,"\u0406\u043D\u0433\u0440\u0435\u0434\u0456\u0454\u043D\u0442\u0438"),i(),t(31,"div",23),u(32," \u0414\u043B\u044F \u0440\u0435\u0446\u0435\u043F\u0442\u0443 \u0432\u0430\u043C \u043F\u043E\u0442\u0440\u0456\u0431\u043D\u043E: "),i(),t(33,"div",24)(34,"div",25),g(35,G,2,1,"div",26),l(36,"hr"),g(37,H,2,1,"div",27),i()()(),t(38,"div",21)(39,"div",22),u(40,"\u0424\u0430\u0437\u0438"),i(),t(41,"div",23),u(42," \u0420\u0435\u0446\u0435\u043F\u0442 \u043F\u043E\u0434\u0456\u043B\u044F\u0454\u0442\u044C\u0441\u044F \u043D\u0430: "),i(),t(43,"div",24)(44,"div",25),g(45,J,2,1,"div",26),l(46,"hr"),g(47,K,2,1,"div",27),i()()()()()()()),o&2&&(y("documents-wrapper--open",e.isMenuOpen),s(7),y("burger--close",e.isMenuOpen),s(6),v("ngModel",e.recipe.name),s(3),v("ngModel",e.recipe.description),s(3),v("ngModel",e.recipe.imageUrl),s(16),_("ngForOf",e.recipe.ingredients),s(2),_("ngForOf",e.ingredients),s(8),_("ngForOf",e.recipe.phases),s(2),_("ngForOf",e.phases))},dependencies:[P,b,I,T,U],styles:['@charset "UTF-8";.documents-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;gap:20px}.recipe-form[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;gap:15px}.documents-main[_ngcontent-%COMP%]{flex:2;display:flex;flex-direction:column;gap:20px}.documents-main-row[_ngcontent-%COMP%]{margin-bottom:10px}.documents__title[_ngcontent-%COMP%]{font-size:18px;font-weight:700}.documents-tags[_ngcontent-%COMP%]{margin-top:10px}.documents-tags__item[_ngcontent-%COMP%]{padding:8px;margin:5px 0;background-color:#ff9800;border-radius:5px;cursor:pointer}.documents-tags__item[_ngcontent-%COMP%]:hover{background-color:#fb8c00}button[_ngcontent-%COMP%]{background-color:#4caf50;color:#fff;border:none;padding:10px;cursor:pointer;border-radius:5px;font-size:16px}button[_ngcontent-%COMP%]:hover{background-color:#45a049}input[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{padding:10px;font-size:16px;border:1px solid #ccc;border-radius:5px;width:100%}.file-upload[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.file-upload[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]{padding:5px}']})}}return n})();var Q=[{path:"",component:z}],_e=(()=>{class n{static{this.\u0275fac=function(o){return new(o||n)}}static{this.\u0275mod=O({type:n})}static{this.\u0275inj=F({imports:[k.forChild(Q),j]})}}return n})();export{_e as CreateModule};
